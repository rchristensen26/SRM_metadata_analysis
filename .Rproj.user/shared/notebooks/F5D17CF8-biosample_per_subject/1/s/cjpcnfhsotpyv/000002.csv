"0","# first, let's figure out how many samples have overlapping data for the variables, and decide which variable should have priority when parsing the data"
"0",""
"0","# sum(!is.na(dataset21and22$`host subject id`) & !is.na(dataset21and22$`individual name`))"
"0",""
"0","# create ""merged_subject_id"" column and add data for all variables in subject_variables list"
"0","# make sure there are no ""missing"" values -- change these to NA!"
"0",""
"0","# na_values <- c(""missing"","
"0","#                ""Missing"", "
"0","#                """", "
"0","#                "" "","
"0","#                ""not collected"","
"0","#                ""not applicable"", "
"0","#                ""Not Applicable"", "
"0","#                ""Not Collected"", "
"0","#                ""N/A"", "
"0","#                ""n/a"","
"0","#                ""not collected"","
"0","#                ""not determined"","
"0","#                ""not provided"","
"0","#                ""Unknown"","
"0","#                ""unknown"","
"0","#                ""not available"","
"0","#                ""Not collected"","
"0","#                ""Not applicable"","
"0","#                ""Not available"","
"0","#                ""na"","
"0","#                ""NOT COLLECTED"")"
"0","# "
"0","# for (variable in subject_variables) {"
"0","#   for (replace_value in na_values) {"
"0","#     dataset21and22[[variable]] <- replace(dataset21and22[[variable]], dataset21and22[[variable]] == replace_value, NA)"
"0","#   }"
"0","# }"
"0",""
"0","# dataset21and22$merged_subject_id <- NA"
"0",""
"0","subject_variables <- c("
"0","  ""host subject id"","
"0","  ""Test person"","
"0","  ""submitted subject id"","
"0","  ""patient_name"","
"0","  ""Patient_name"","
"0","  ""patient"","
"0","  ""individual name"","
"0","  ""individual"","
"0","  ""subject_id"""
"0",")"
"0",""
"0","# for (variable in subject_variables){"
"0","#   for (n_row in 1:nrow(dataset21and22)) {"
"0","#     if (is.na(dataset21and22[n_row, ""merged_subject_id""])) {"
"0","#       if (!is.na(dataset21and22[[n_row, variable]])) {"
"0","#         dataset21and22[n_row, ""merged_subject_id""] <- dataset21and22[[n_row, variable]]"
"0","#       }"
"0","#     }"
"0","#   }"
"0","# }"
"0",""
"0","sum(!is.na(dataset21and22$merged_subject_id))"
"1","[1]"
"1"," 7159"
"1","
"
"0","# 7159 samples with subject id"
"0",""
"0","length(unique(dataset21and22$merged_subject_id))"
"1","[1]"
"1"," 2079"
"1","
"
"0","# 2079 unique subject ids! not that bad, but i suppose it really depends on the available metadata..."
