"0","# working df = data (copy of dataset21and22)"
"0",""
"0","# # next, let's get a list of the samples that fall into this category"
"0","# samples <- as.vector(dataset21and22$sample_id)"
"0",""
"0","# and now, we check if these samples have any metadata variables related to a project number"
"0","# sum(!is.na(data$ProjectAccession))"
"0","# 731 biosamples have info for project accession, so we can add these directly to the nmerged project_accession column"
"0",""
"0","# welp. none of the samples have a project accession. "
"0","# new strategy: "
"0","# step 1: manually find project accession for sample "
"0","# step 2: download list of samples associated with that project "
"0","# step 3: match samples from list in step 2 (""project_samples"") with samples in ""samples"" and add to ""matched_samples"" list"
"0","# step 4: add project accession to new ""project_accession"" column for matched samples dataset21and22"
"0","# step 5: remove matched samples from ""samples"" -- wash rinse repeat"
"0",""
"0","# first, add all values from ProjectAccession to merged_project_accession"
"0","# data$merged_project_accession <- data$ProjectAccession"
"0",""
"0","PRJDB8054 <- read_csv(""Bioproject_Biosample_Lists/PRJDB8054.txt"", col_names = FALSE, show_col_types = FALSE)"
"0","projects <- c(PRJNA514245, PRJNA442434, PRJNA178162, PRJEB26092, PRJDB4597, PRJDB6127, PRJDB6498, PRJDB6872, PRJDB7521, PRJDB7714, PRJDB8054)"
"0","project_accession <- ""PRJDB8054"""
"0","project_samples <- as.vector(tail(projects, 1)[[1]])"
"0",""
"0","matched_samples <- intersect(project_samples, samples)"
"0",""
"0","# first project"
"0","# data$merged_project_accession <- ifelse(data$sample_id %in% matched_samples, project_accession, NA)"
"0",""
"0","# subsequent projects"
"0","data$merged_project_accession <-"
"0","ifelse(is.na(data$merged_project_accession),"
"0","         ifelse(data$sample_id %in% matched_samples, project_accession, NA), data$merged_project_accession)"
"0",""
"0","length(matched_samples)"
"1","[1]"
"1"," 0"
"1","
"
"0","# View(table(data$merged_project_accession))"
"0","sum(!is.na(data$merged_project_accession))"
"1","[1]"
"1"," 16352"
"1","
"
"0","samples <- as.vector(subset(data$sample_id, is.na(data$merged_project_accession)))"
"0","samples[1]"
"1","[1]"
"1"," ""SAMD00169686"""
"1","
"
