"0","# create new df with subject id as row"
"0",""
"0","OTU_names <- colnames(dataset[11:45])"
"0","OTU_names <- append(OTU_names, colnames(dataset[146:158]))"
"0","OTU_names <- append(OTU_names, colnames(dataset[448:454]))"
"0",""
"0","# make empty df with column names from original dataset"
"0","subject_df <- data.frame(matrix(nrow = 0, ncol = ncol(dataset)))"
"0","colnames(subject_df) <- colnames(dataset)"
"0",""
"0","# iterate over rows in original dataset and add rows with subject ID's one at a time"
"0","for (n_row in 1:nrow(dataset)) {"
"0","  # check that there is a value for subject id"
"0","  if (!is.na(dataset[n_row, ""merged_subject_id""])) {"
"0","    # add row to subject_df if subject id isn't already in there"
"0","    if (!dataset[n_row, ""merged_subject_id""] %in% as.list(subject_df$merged_subject_id)){"
"0","      subject_df <- rbind(subject_df, dataset[n_row,])"
"0","    }"
"0","    # if subject id already in df, append sample_id to sample_id column and iterate over OTU names (retain TRUE)"
"0","    else if (dataset[n_row, ""merged_subject_id""] %in% as.list(subject_df$merged_subject_id)) {"
"0","      sample_ids <- append(subject_df$sample_id[subject_df$merged_subject_id == dataset[n_row, ""merged_subject_id""]], dataset[n_row, ""sample_id""])"
"0","      subject_df$sample_id[subject_df$merged_subject_id == dataset[n_row, ""merged_subject_id""]] <- toString(sample_ids)"
"0","      # retain TRUE (""1"") values for OTUs"
"0","      for (OTU in OTU_names) {"
"0","        # check that OTU = 1 in original df"
"0","        if (dataset[n_row, OTU] == 1) {"
"0","          # check that OTU = 0 in subject df"
"0","          if (subject_df[,OTU][subject_df$merged_subject_id == dataset[n_row, ""merged_subject_id""]] == 0) {"
"0","            # change OTU 0 --> 1 in subject df"
"0","            subject_df[,OTU][subject_df$merged_subject_id == dataset[n_row, ""merged_subject_id""]] <- 1"
"0","          }"
"0","        }"
"0","      }"
"0","    }"
"0","  }"
"0","}"
"0",""
